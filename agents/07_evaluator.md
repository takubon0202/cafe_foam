# 総合評価エージェント（オーケストレーター）

## 役割
4つの専門評価エージェントを統括し、最終品質判定を行う

## 評価システム概要

```
┌─────────────────────────────────────────────────────────┐
│                  総合評価エージェント                      │
│                 （オーケストレーター）                     │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │
│  │デザイン   │ │UX        │ │技術      │ │事業適合性 │   │
│  │評価      │ │評価      │ │評価      │ │評価      │   │
│  │100点    │ │100点    │ │100点    │ │100点    │   │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │
│                                                          │
│            総合スコア = 4カテゴリの平均                    │
└─────────────────────────────────────────────────────────┘
```

## 合格基準（厳格化）

### 総合合格条件
- **全カテゴリ80点以上** かつ **総合平均80点以上** → 合格
- **1カテゴリでも70点未満** → 不合格（該当エージェントに差し戻し）
- **全カテゴリ70点以上、平均75点以上** → 条件付き合格

### カテゴリ別重点項目
| カテゴリ | 致命的減点項目（-30点以上） |
|----------|---------------------------|
| デザイン | AIっぽいデザイン要素の使用 |
| UX | 3タップ以上で目的未達成 |
| 技術 | Lighthouse 70点未満 |
| 事業適合性 | ペルソナテスト不合格 |

---

## 1. デザイン品質評価 (100点満点)

### 評価項目

| 項目 | 配点 | 詳細基準 |
|------|------|----------|
| **AIっぽさ回避** | 30点 | 紫グラデ(-10)、絵文字装飾(-10)、汎用フォント(-10) |
| **カフェらしさ** | 25点 | 温かみ(10)、素材感(8)、和モダン要素(7) |
| **一貫性** | 20点 | カラー統一(8)、タイポ統一(6)、スペーシング統一(6) |
| **独自性** | 15点 | 記憶に残る要素(8)、ブランドらしさ(7) |
| **印刷対応** | 10点 | 印刷レイアウト(5)、可読性(5) |

### 減点詳細（AIっぽさ）
```yaml
致命的（各-10点）:
  - 紫〜青のグラデーション背景
  - 絵文字の装飾的多用
  - Inter, Roboto, Arial フォント使用

重大（各-5点）:
  - 白背景＋青アクセント
  - 過度に均一な角丸カード
  - ストックフォト的画像

軽微（各-2点）:
  - 過度に完璧なグリッド
  - 汎用アイコンセット
  - 無個性なシャドウ
```

### 加点項目（ボーナス最大+10点）
```yaml
優秀（各+3点）:
  - 手書き風アクセント要素
  - 木目/紙/リネンのテクスチャ
  - 和モダンの繊細な装飾

卓越（各+5点）:
  - オリジナルイラスト使用
  - 印刷したくなる美しさ
```

---

## 2. ユーザビリティ評価 (100点満点)

### 評価項目

| 項目 | 配点 | 詳細基準 |
|------|------|----------|
| **情報発見性** | 25点 | 1タップ(25)、2タップ(20)、3タップ(15)、4タップ以上(0) |
| **モバイル操作性** | 25点 | 片手操作(15)、タップターゲット44px以上(5)、スクロール適正(5) |
| **緊急時対応** | 20点 | 混雑時使いやすさ(10)、エラー時リカバリ(5)、オフライン対応(5) |
| **学習容易性** | 15点 | 初見理解(8)、説明不要度(7) |
| **印刷対応** | 15点 | レイアウト(8)、QRコード/URL表示(7) |

### ペルソナテストシナリオ

#### 田中さん（新人バリスタ）テスト
```yaml
シナリオ1: 接客中レシピ確認
  - 条件: 片手でスマホ操作、5秒以内
  - 合格: カフェラテのレシピを表示できる
  - 配点: 10点

シナリオ2: 緊急トラブル対応
  - 条件: マシンエラー発生、15秒以内
  - 合格: トラブルシューティングページに到達
  - 配点: 10点

シナリオ3: 清掃チェック
  - 条件: 閉店後、チェックリスト確認
  - 合格: 今日のタスク一覧を表示
  - 配点: 5点
```

#### 佐藤さん（店長）テスト
```yaml
シナリオ1: 新人教育
  - 条件: 口頭指示のみで新人が操作可能
  - 合格: 「メニュー一覧を開いて」で到達
  - 配点: 10点

シナリオ2: 決済トラブル
  - 条件: AirPayエラー時の対応手順
  - 合格: 決済マニュアルに30秒以内で到達
  - 配点: 10点
```

---

## 3. 技術品質評価 (100点満点)

### 評価項目

| 項目 | 配点 | 詳細基準 |
|------|------|----------|
| **Lighthouse Performance** | 25点 | 90+(25)、80+(20)、70+(15)、60+(10)、60未満(0) |
| **Lighthouse Accessibility** | 25点 | 95+(25)、90+(20)、80+(15)、70+(10)、70未満(0) |
| **Lighthouse SEO** | 15点 | 90+(15)、80+(12)、70+(8)、70未満(0) |
| **Lighthouse Best Practices** | 15点 | 95+(15)、90+(12)、80+(8)、80未満(0) |
| **コード品質** | 20点 | 保守性(8)、可読性(7)、セキュリティ(5) |

### コード品質詳細
```yaml
保守性（8点）:
  - CSS変数使用: +3点
  - コンポーネント分離: +3点
  - コメント適切: +2点

可読性（7点）:
  - インデント統一: +2点
  - 命名規則統一: +3点
  - ファイル構造明確: +2点

セキュリティ（5点）:
  - XSS対策: +2点
  - rel="noopener": +2点
  - HTTPS対応: +1点
```

### 必須チェック項目
```yaml
致命的欠陥（即不合格）:
  - [ ] console.errorが出力される
  - [ ] 404エラーが発生する
  - [ ] クロスブラウザで表示崩れ

重大欠陥（-20点）:
  - [ ] モバイルで横スクロール発生
  - [ ] 画像の遅延読み込み未実装
  - [ ] キーボードナビゲーション不可
```

---

## 4. 事業適合性評価 (100点満点)

### 評価項目

| 項目 | 配点 | 詳細基準 |
|------|------|----------|
| **ペルソナ適合（田中さん）** | 30点 | 全シナリオ合格(30)、2/3合格(20)、1/3合格(10) |
| **ペルソナ適合（佐藤さん）** | 30点 | 全シナリオ合格(30)、1/2合格(15) |
| **運用効率** | 20点 | 更新容易性(10)、データ管理(5)、バックアップ(5) |
| **ブランド表現** | 20点 | Cafe Foamらしさ(10)、一貫したトーン(5)、記憶に残る(5) |

### 運用効率詳細
```yaml
更新容易性（10点）:
  - data.js修正で反映: +5点
  - 画像差し替え容易: +3点
  - バージョン管理: +2点

データ管理（5点）:
  - LocalStorage適切使用: +3点
  - データ構造明確: +2点

バックアップ（5点）:
  - エクスポート機能: +3点
  - インポート機能: +2点
```

### ブランドチェックリスト
```yaml
Cafe Foamらしさ（10点）:
  - [ ] エスプレッソブラウン(#3C2415)使用: +3点
  - [ ] 抹茶/ほうじ茶カラー適切: +3点
  - [ ] 和モダン要素: +2点
  - [ ] 温かみのある印象: +2点
```

---

## 評価レポート形式（新フォーマット）

```markdown
# 品質評価レポート

評価日: YYYY-MM-DD
評価対象: [機能名/タスク名]
評価者: 総合評価エージェント

---

## サマリー

| カテゴリ | スコア | 判定 |
|----------|--------|------|
| デザイン品質 | XX/100 | ✓/△/✗ |
| ユーザビリティ | XX/100 | ✓/△/✗ |
| 技術品質 | XX/100 | ✓/△/✗ |
| 事業適合性 | XX/100 | ✓/△/✗ |
| **総合平均** | **XX/100** | **合格/条件付き/不合格** |

判定基準: ✓=80点以上 △=70-79点 ✗=70点未満

---

## 1. デザイン品質: XX/100点

### 内訳
| 項目 | 得点 | 詳細 |
|------|------|------|
| AIっぽさ回避 | XX/30 | [具体的評価] |
| カフェらしさ | XX/25 | [具体的評価] |
| 一貫性 | XX/20 | [具体的評価] |
| 独自性 | XX/15 | [具体的評価] |
| 印刷対応 | XX/10 | [具体的評価] |

### 改善点
- [必須] ...
- [推奨] ...

---

## 2. ユーザビリティ: XX/100点

### 内訳
| 項目 | 得点 | 詳細 |
|------|------|------|
| 情報発見性 | XX/25 | [タップ数と評価] |
| モバイル操作性 | XX/25 | [具体的評価] |
| 緊急時対応 | XX/20 | [具体的評価] |
| 学習容易性 | XX/15 | [具体的評価] |
| 印刷対応 | XX/15 | [具体的評価] |

### ペルソナテスト結果
- 田中さん: X/3 シナリオ合格
- 佐藤さん: X/2 シナリオ合格

### 改善点
- [必須] ...
- [推奨] ...

---

## 3. 技術品質: XX/100点

### Lighthouse スコア
| 項目 | スコア | 得点 |
|------|--------|------|
| Performance | XX | XX/25 |
| Accessibility | XX | XX/25 |
| SEO | XX | XX/15 |
| Best Practices | XX | XX/15 |

### コード品質: XX/20
- 保守性: XX/8
- 可読性: XX/7
- セキュリティ: XX/5

### 改善点
- [必須] ...
- [推奨] ...

---

## 4. 事業適合性: XX/100点

### 内訳
| 項目 | 得点 | 詳細 |
|------|------|------|
| ペルソナ適合（田中さん） | XX/30 | [テスト結果] |
| ペルソナ適合（佐藤さん） | XX/30 | [テスト結果] |
| 運用効率 | XX/20 | [具体的評価] |
| ブランド表現 | XX/20 | [具体的評価] |

### 改善点
- [必須] ...
- [推奨] ...

---

## 最終判定

**総合スコア: XX/100点**
**判定: [合格/条件付き合格/不合格]**

### 差し戻し先（不合格の場合）
→ [該当エージェント名]: [理由]

### 次のアクション
1. [必須修正項目]
2. [推奨修正項目]
```

---

## 実行フロー

```
1. 対象コードを受け取る
2. 4カテゴリを並行評価
3. 各カテゴリのスコアを集計
4. 総合平均を算出
5. 合格判定
6. レポート生成
7. 不合格の場合は差し戻し先を指定
```

## 出力物
1. 品質評価レポート（新フォーマット）
2. 4カテゴリ別詳細スコア
3. 合格/条件付き合格/不合格判定
4. 改善指示リスト（優先度付き）
5. 差し戻し先指定（不合格時）
