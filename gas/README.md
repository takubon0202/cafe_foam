# Google Apps Script (GAS) 設定ガイド

## 概要

このフォルダには、在庫管理システムのためのGoogle Apps Scriptコードが含まれています。
スプレッドシートからデータを取得し、JSONとして返すAPIを提供します。

## ファイル

- `inventory-api.js` - 在庫データ取得API

## デプロイ手順

### 1. Google Apps Scriptプロジェクトの作成

1. [Google Apps Script](https://script.google.com/) にアクセス
2. 左上の「新しいプロジェクト」をクリック
3. プロジェクト名を「Cafe Foam 在庫API」などに変更

### 2. コードの貼り付け

1. `inventory-api.js` の内容をコピー
2. GASエディタの `コード.gs` に貼り付け
3. 保存（Ctrl+S）

### 3. ウェブアプリとしてデプロイ

1. 「デプロイ」→「新しいデプロイ」をクリック
2. 「種類の選択」で歯車アイコンをクリック
3. 「ウェブアプリ」を選択
4. 設定:
   - **説明**: 在庫管理API（任意）
   - **実行ユーザー**: 自分
   - **アクセス**: 全員
5. 「デプロイ」をクリック
6. 「アクセスを承認」をクリック（初回のみ）
7. Googleアカウントでログインし、「許可」をクリック
8. **ウェブアプリのURL** をコピー

### 4. フロントエンドとの連携

1. `script.js` を開く
2. `INVENTORY_API_URL` 変数にコピーしたURLを設定:

```javascript
const INVENTORY_API_URL = 'https://script.google.com/macros/s/xxxxx/exec';
```

### 5. 動作確認

1. ブラウザで在庫管理ページを開く
2. 在庫データが表示されることを確認

## トラブルシューティング

### データが表示されない

1. GASのデプロイURLが正しいか確認
2. スプレッドシートが存在するか確認
3. シート名が正しいか確認（`在庫数・発注`、`在庫管理場所`、`在庫管理`）

### 権限エラー

1. GASの「アクセス」設定が「全員」になっているか確認
2. スプレッドシートの共有設定を確認

### CORSエラー

GASのウェブアプリはデフォルトでCORSに対応しています。
エラーが出る場合は、デプロイを再度行ってください。

## 更新時の注意

コードを更新した場合は、新しいデプロイを作成する必要があります：

1. 「デプロイ」→「新しいデプロイ」
2. 設定は変更せず「デプロイ」
3. 新しいURLが発行された場合は、`script.js` を更新

または、既存のデプロイを更新：

1. 「デプロイ」→「デプロイを管理」
2. 編集アイコン（鉛筆）をクリック
3. 「バージョン」を「新しいバージョン」に変更
4. 「デプロイ」をクリック
